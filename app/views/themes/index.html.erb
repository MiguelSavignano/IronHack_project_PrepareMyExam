<link  rel="stylesheet" type="text/css" href="/assets/css/line_chart_animation.css">
<div class="row">
   <div class="col s12 m12 l6">
       <ul id="staggered-test">
        <li>
          <div class="card-panel indigo lighten-5">
            <table>
              <thead>
                <tr>
                  <th>Description</th>
                  <th>Minutes</th>
                  <th colspan="3"></th>
                </tr>
              </thead>
              <tbody>
                <% @themes.each do |theme| %>
                  <tr>
                    <td><%= theme.description %></td>
                    <td><%= theme.minutes %></td>
                    <td><%= link_to "Upload note", new_theme_note_path(theme) %></td>
                  </tr>
                <% end %>
              </tbody>
            </table>
            <p>Total minutes: <%=@themes.reduce(0){|sum,theme|sum+theme.minutes} %></p>
          </div>
        </li>
       </ul>
   </div>
   <div class="col s12 m12 l6">
     <div class="card-panel indigo lighten-5">
       <div class="ct-chart ct-golden-section" id="chart2"></div>
     </div>
</div>

 <script>
 $( document ).ready(function() {
    Materialize.showStaggeredList('#staggered-test')
  });
  var contents = [];
  <% @exam.themes.each do |theme| %>
    contents.push('<%= theme.description %>');
  <% end %>

  var chart = new Chartist.Bar('.ct-chart', {
  labels: contents,
  series: [
    <%=@exam.themes.map{|theme|theme.minutes}%>
  ]
}, {
  seriesBarDistance: 10,
  reverseData: true,
  horizontalBars: true,
  axisY: {
    offset: 70
  }
});

chart.on('draw', function(data) {
  if(data.type === 'bar') {
    data.element.animate({
      x2: {
        id: 'grow',
        dur: 2000,
        from: data.x1,
        to: data.x2,
        easing: Chartist.Svg.Easing.easeOutQuint
      }
    }, false);
  }
});


  </script>
 
  
 